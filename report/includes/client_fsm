digraph finite_state_machine {
	listening_directory -> mail_lists_prepairing [label=mail_appearance]
	mail_lists_prepairing -> dns_resolving [label=lists_formed]
	dns_resolving -> opening_socket [label=dns_resolved]
	dns_resolving -> error [label=dns_resolved_with_error]
	opening_socket -> try_connect [label=socket_open]
	try_connect -> ready_to_transmit [label=connected_to_mx]
	try_connect -> error [label=connect_fail]
	ready_to_transmit -> ehlo [label=command_helo]
	ready_to_transmit -> error [label=transmission_error]
	ehlo -> mail [label=command_mail]
	ehlo -> error [label=transmission_error]
	mail -> rcpt [label=command_rcpt]
	mail -> error [label=transmission_error]
	rcpt -> data [label=command_rcpt]
	rcpt -> error [label=transmission_error]
	data -> quit [label=command_mail]
	data -> error [label=transmission_error]
	quit -> mail_sended [label=command_quit]
	quit -> error [label=transmission_error]
	mail_sended -> ready_to_transmit [label=mail_list_iteration]
	mail_sended -> dns_resolving [label=iteration]
	mail_sended -> listening_directory [label=iteration_end]
	error -> dns_resolving [label=iteration]
	error -> listening_directory [label=iteration_end]
}
